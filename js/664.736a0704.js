"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[664],{664:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.orders.length>0,expression:"orders.length > 0"}]},[t("Table",{scopedSlots:e._u([{key:"thead",fn:function(){return[t("tr",[t("th",[e._v("購買時間")]),t("th",[e._v("Email")]),t("th",[e._v("購買款項")]),t("th",[e._v("應付金額")]),t("th",[e._v("是否付款")]),t("th",[e._v("編輯")])])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.orders,(function(r){return t("tr",{key:r.id},[t("td",[e._v(e._s(e._f("date")(r.create_at)))]),t("td",[e._v(e._s(r.user.email))]),t("td",[t("ul",{staticClass:"mb-0"},e._l(r.products,(function(r){return t("li",{key:r.id},[e._v(e._s(r.product.title))])})),0)]),t("td",{staticClass:"text-end"},[e._v(e._s(e._f("currency")(r.total)))]),t("td",[r.is_paid?t("p",{staticClass:"text-success"},[e._v("已付款")]):t("p",{staticClass:"text-danger"},[e._v("未付款")])]),t("td",[t("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(t){return e.openModal(r)}}},[e._v(" 編輯 ")])])])}))},proxy:!0},{key:"tfoot",fn:function(){},proxy:!0}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.orders.length>0,expression:"orders.length > 0"}],staticClass:"d-flex justify-content-center"},[t("Pagination",{attrs:{pagination:e.pagination},on:{pageItem:e.getOrders}})],1),t("Modal",{attrs:{item:e.tempOrder,status:e.status},on:{update:e.updateOrder},scopedSlots:e._u([{key:"modalTitle",fn:function(){return[t("h4",[e._v("編輯訂單")])]},proxy:!0},{key:"modalBody",fn:function(){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6"},[t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:"email"}},[e._v("信箱")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"",id:"email","aria-describedby":"emailHelpId",placeholder:""},domProps:{value:e.tempOrder.user.email},on:{input:function(t){t.target.composing||e.$set(e.tempOrder.user,"email",t.target.value)}}})]),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:"address"}},[e._v("地址")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.tempOrder.user.address,expression:"tempOrder.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"address",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.tempOrder.user.address},on:{input:function(t){t.target.composing||e.$set(e.tempOrder.user,"address",t.target.value)}}})]),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:"name"}},[e._v("姓名")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"name",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.tempOrder.user.name},on:{input:function(t){t.target.composing||e.$set(e.tempOrder.user,"name",t.target.value)}}})]),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:"tel"}},[e._v("電話")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.tempOrder.user.tel,expression:"tempOrder.user.tel"}],staticClass:"form-control",attrs:{type:"tel",name:"",id:"tel",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.tempOrder.user.tel},on:{input:function(t){t.target.composing||e.$set(e.tempOrder.user,"tel",t.target.value)}}})]),t("div",{staticClass:"form-check form-check-inline"},[t("label",{staticClass:"form-check-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.tempOrder.is_paid,expression:"tempOrder.is_paid"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"",id:"",value:"checkedValue"},domProps:{checked:Array.isArray(e.tempOrder.is_paid)?e._i(e.tempOrder.is_paid,"checkedValue")>-1:e.tempOrder.is_paid},on:{change:function(t){var r=e.tempOrder.is_paid,a=t.target,s=!!a.checked;if(Array.isArray(r)){var o="checkedValue",i=e._i(r,o);a.checked?i<0&&e.$set(e.tempOrder,"is_paid",r.concat([o])):i>-1&&e.$set(e.tempOrder,"is_paid",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.tempOrder,"is_paid",s)}}}),e._v("是否已付款 ")])]),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:"total"}},[e._v("應付金額")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.tempOrder.total,expression:"tempOrder.total",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"",id:"total",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.tempOrder.total},on:{input:function(t){t.target.composing||e.$set(e.tempOrder,"total",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),e._l(e.tempOrder.products,(function(r){return t("div",{key:r.id,staticClass:"col-sm-6"},[t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:"qty"}},[e._v("數量")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:r.qty,expression:"item.qty",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",name:"",id:"name",placeholder:"","aria-describedby":"helpId"},domProps:{value:r.qty},on:{input:function(t){t.target.composing||e.$set(r,"qty",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])}))],2)]},proxy:!0},{key:"modalFooter",fn:function(){},proxy:!0}])})],1)},s=[],o=r(2166),i=r(5196),d=r(1863),n=r(9143),l={components:{Table:d.Z,Modal:i.Z,Pagination:n.Z},data(){return{orders:{},tempOrder:{user:{}},status:{update:!1},pagination:{}}},methods:{getOrders(){const e="https://vue-course-api.hexschool.io/api/gunshop/admin/orders",t=this;t.$http.get(e).then((e=>{t.orders=e.data.orders,t.pagination=e.data.pagination}))},openModal(e){const t=this;t.tempOrder=Object.assign({},e),console.log(t.tempOrder);const r=new o.u_("#modalComponent");r.show()},hideModal(){const e=document.querySelector("#modalComponent"),t=o.u_.getInstance(e);t.hide()},updateOrder(){const e=this,t=`https://vue-course-api.hexschool.io/api/gunshop/admin/order/${e.tempOrder.id}`;e.isLoading=!0,e.$http.put(t,{data:e.tempOrder}).then((t=>{e.$bus.$emit("msg-pop",t.data.message,"success"),e.isLoading=!1,e.hideModal(),e.getOrders()}))}},created(){this.getOrders()}},c=l,m=r(1001),p=(0,m.Z)(c,a,s,!1,null,null,null),u=p.exports}}]);
//# sourceMappingURL=664.736a0704.js.map