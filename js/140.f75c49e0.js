"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[140],{8882:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-center"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),t.products.length>0?e("div",{staticClass:"text-end mt-4"},[e("button",{staticClass:"btn btn-primary",on:{click:t.openModal}},[t._v(" 建立新的產品 ")])]):t._e(),t.products.length>0?e("Table",{attrs:{item:t.tempProduct,products:t.products},on:{edit:t.openModal,delete:t.delModal}}):t._e(),e("div",{staticClass:"d-flex justify-content-center"},[t.products.length>0?e("Pagination",{attrs:{pagination:t.pagination},on:{pageItem:t.getProducts}}):t._e()],1),e("Modal",{attrs:{item:t.tempProduct,"is-new":t.isNew,status:t.status},on:{update:t.updateProduct}}),e("DeleteModal",{attrs:{item:t.tempProduct,status:t.status},on:{delete:t.delProduct}})],1)},a=[],d=s(2166),n=s(2599),u=s(7846),i=s(8266),c=s(979),p={components:{Pagination:n.Z,Modal:u.Z,DeleteModal:i.Z,Table:c.Z},data(){return{products:[],tempProduct:{},isNew:!1,isLoading:!1,status:{update:!1,upload_img:!1},pagination:{}}},methods:{getProducts(t=1){const e=`https://vue-course-api.hexschool.io/api/gunshop/products?page=${t}`,s=this;s.isLoading=!0,s.$http.get(e).then((t=>{s.isLoading=!1,s.products=t.data.products,s.pagination=t.data.pagination}))},openModal(t,e){const s=this;t?(s.tempProduct={},s.isNew=!0):(s.tempProduct=Object.assign({},e),s.isNew=!1);const o=new d.u_("#modalComponent");o.show()},delModal(t){this.tempProduct=Object.assign({},t);const e=new d.u_("#delModal");e.show()},updateProduct(){let t="https://vue-course-api.hexschool.io/api/gunshop/admin/product",e="post";const s=this;s.isNew||(t=`https://vue-course-api.hexschool.io/api/gunshop/admin/product/${s.tempProduct.id}`,e="put"),s.status.update=!0,s.$http[e](t,{data:s.tempProduct}).then((t=>{console.log(t.data),t.data.success?s.$bus.$emit("msg-pop",t.data.message,"success"):s.$bus.$emit("msg-pop",t.data.message,"danger"),s.status.update=!1,s.getProducts(),s.hideModal()}))},hideModal(){const t=document.querySelector("#modalComponent"),e=d.u_.getInstance(t);e.hide()},hideDelModal(){const t=document.querySelector("#delModal"),e=d.u_.getInstance(t);e.hide()},delProduct(){const t=this;t.status.update=!0;const e=`https://vue-course-api.hexschool.io/api/gunshop/admin/product/${t.tempProduct.id}`;t.$http.delete(e).then((e=>{t.status.update=!1,t.$bus.$emit("msg-pop",e.data.message,"success"),t.hideDelModal(),t.getProducts()}))}},created(){this.getProducts()}},r=p,l=s(1001),h=(0,l.Z)(r,o,a,!1,null,null,null),g=h.exports}}]);
//# sourceMappingURL=140.f75c49e0.js.map